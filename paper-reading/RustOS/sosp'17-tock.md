# Tock

# 论文阅读

## 1 Introduction

通用计算平台的硬件特征：特权级（阻止直接访问硬件）、MMU（虚拟地址空间，隔离）、较大的 RAM（可以动态分配内核数据结构，更有效利用内存）。然而在嵌入式平台成本和功耗受限，只能实现上述的部分特征：更简单的特权级、简化版的内存保护 MPU、以及很小（甚至只有 64KiB ）的 RAM。于是虽然**内存隔离**和**动态内存管理**在软件工程和性能（？）的角度更好，在嵌入式平台上也只能使用比较简单的编程模型。

比如：嵌入式平台上经常把应用和内核合成为一个单独的程序。优点：更容易共享数据，系统调用变为开销更小的函数调用。但是也有缺点：难以支持多任务。而且缺少了内存隔离难以保证整个系统的稳定性和应用的安全性。

嵌入式平台为了**长时运行**和**避免错误**经常使用静态内存分配。优点：避免了堆内存耗尽，尤其是在内存紧缺的情况极大提升了稳定性。缺点：需要预留最大并发情况下的内存，内存利用效率较低。而且为每种资源预留多少内存不好估计，还会随着具体应用的特征而发生变化。

而 Tock 的目标是在**嵌入式平台上更好支持多任务**，优点如下：

* 提供错误隔离和内核数据结构的动态分配。
* 使用类型安全的 Rust 编写，绝大部分代码通过编译器的检验。
* 为很多实际硬件提供了进程抽象。
* 为了避免内存利用效率和并发之间的 trade-off，使用了 **grant**。暂时看不懂这是个什么东西，后面再看。

